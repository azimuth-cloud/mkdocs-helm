# mkdocs-helm

A simple Helm chart for hosting mkdocs websites on Kubernetes.

## Usage

Set the target git repo as a Helm value:

```
repo: https://github.com/<org>/<repo> OR git@github.com:<org>/<repo>
```

If the target repo is not public, an optional SSH private key can be provided to allow
cloning the private repo:

```
sshPrivateKey: |
  <private-key-content>
```

where the corresponding public key should be added to the target repo as a deploy key.

For additional customisation options, see the [chart values](values.yaml).

## Architecture

The Helm chart structure is based on the default chart template generated by `helm create <chart-name>`.
The primary modifications to the template are two [init containers](https://github.com/azimuth-cloud/mkdocs-helm/blob/de4c53ee6b3eb02701b64601c41802c06f21d892/templates/deployment.yaml#L33-L66) on the NGINX pod which clone
the target repository and run `mkdocs build` from the repository root.
